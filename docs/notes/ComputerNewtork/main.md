---
time: 2021-12-24
origin: true
category: notes
tags:
  - 计网
  - 考研

---
# 计网重点



## 第一章 计算机网络概述

通览



## 第二章 计算机网络协议体系结构

### 2.1 计算机网络协议

### 2.2 计算机网络体系结构



### 2.3 OSI ==简单浏览==

OSI （7层）是法定标准，但事实标准则是 TCP/IP （4层）标准。

ISO OSI 模型的提出的目的是 支持**异构网络系统**的互联互通

> 应用层
>
> 表示层
>
> > 数据格式变换
> >
> > 数据加密解密
> >
> > 数据压缩恢复
>
> 会话层
>
> > 提供建立连接并在连接上有序地传输数据 
>
> 传输层
>
> > 负责主机中两个进程的通信，端到端的通信。
> >
> > 传输单位是 报文段或用户数据报。
> >
> > 1. 可靠传输、不可靠传输
> > 2. 差错控制
> > 3. 流量控制
> > 4. 复用分用
>
> 网络层
>
> > 把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务。
> >
> > 网络层传输单位是 数据报。
> >
> > 1. 路由控制 ： 最佳路径
> > 2. 流量控制
> > 3. 差错控制
> > 4. 拥塞控制
>
> 数据链路层：加头部+尾部
>
> > 数据报组装成帧
> >
> > 传输单位是 帧
> >
> > 1. 成帧
> > 2. 差错控制
> > 3. 流量控制
> > 4. 访问控制
>
> 物理层
>
> > 实现比特流的透明传输
> >
> > 1. 定义接口特性
> > 2. 定义传输模式
> > 3. 定义传输速率
> > 4. 比特同步
> > 5. 比特编码

### 2.4 TCP/IP 协议簇

> 应用层
>
> 传输层
>
> 网际层
>
> 网络接口层



| TCP/IP 与 OSI 相同点   |
| ---------------------- |
| 分层                   |
| 基于独立的协议栈的概念 |
| 可以实现异构网络互联   |



TCP/IP 与 OSI 不同点

|        | TCP/IP                                    | ISO/OSI                                  |
| ------ | ----------------------------------------- | ---------------------------------------- |
|        |                                           | 先出现 模型先于协议发明 不偏向特定的协议 |
|        | 考虑到异构网互联的问题 将IP作为重要的层次 |                                          |
| 网络层 | 无连接                                    | 无连接+面向连接                          |
| 传输层 | 无连接+面向连接                           | 面向连接                                 |





#### 五层参考模型

> 应用层：支持网络应用
>
> 传输层：进程-进程的数据传输
>
> 网络层：源主机到目的主机的数据分组路由与转发
>
> 数据链路层：把网络层传下来的数据组装成帧
>
> 物理层：比特传输



### 2.5 局域网络体系结构参考模型 ==:red_circle:重点== 





习题：

7 8 18 24



## 第三章 数据通信基础

### 3.1 数据通信基本知识

**海明码不用看**

- 数据
- 信号
- 信源
- 信宿
- 信道



#### 数据通信方式

- 单工
- 半双工
- 全双工

#### 串行并行传输 - 传输方式

- 串行
  - 按顺序
  - 速度慢 费用低 适合远距离
- 并行
  - 同时发送
  - 速度快 费用高 适合近距离



#### 同步异步传输 - 实现同步传输的方式

- 同步传输
  - 以数据区块为单位传输
- 异步传输
  - 分成小组传输 任何时刻都有可能发送
  - 有一个起始位 和 一个终止位





#### 码元



#### 速率

- 码元传输速率
  - 只与码元长度有关
  - 一秒传输多少个码元
- 信息传输速率
  - 一秒传输多少比特



#### 带宽 Bandwidth

比特每秒 `bps`











### 3.2 传输介质

非物理层

- 导向性介质
  - 双绞线
  - 同轴电缆
  - 光纤
- 非导向型介质
  - 无线电波
  - 微波
  - 红外线、激光

### 3.3 信道复用技术



### 3.4 数据编码技术

### 3.5 交换技术

### 3.6 差错控制技术

题目：

3.3

3.12

3.16

3.18

3.25



## 第四章 应用层

### 应用层协议原理

应用层协议规定

1. 交换的报文类型
2. 报文语法格式
3. 报文中字段的语义
4. 各种类型报文的发送先后顺序和规则

### DNS

- 递归查询
  - 靠别人
- 迭代查询
  - 靠自己



迭代与递归相结合

主机与本地域名服务器是递归的，本地域名服务器到跟域名、顶级域名、权限域名服务器是迭代的。





### HTTP

使用 TCP 进行传输，但协议本身是**无连接的**

- 持久连接 Keep-Alive
  - 非流水线式 一个请求一个文件
  - 流水线式
- 非持久连接 Close
  - 2*RTT + 文档传输时间



#### 报文结构

面向文本的，因此都是一些 ASCII 码串







### FTP

使用 TCP 进行可靠的传输



控制进程 ：21端口 **传送请求**

数据传送进程：20端口 **传送文件** 被动传输则自行协商



传输模式：

- 文本模式  ASCII
- 二进制模式 Binary



### 电子邮件

TCP

#### POP3

TCP连接 端口号 110

- 下载并保留（在服务器）
- 下载并删除

收邮件



#### IMAP

用户确实要打开某个邮件的时候才会传输邮件的内容



#### SMTP

发邮件



#### MIME

|                   SMTP的缺点                   |
| :--------------------------------------------: |
|               不可传送二进制文件               |
| 仅限于传送 7 位 ASCII 不能传送非英语国家的文字 |
|                  邮件长度有限                  |

解析 7位 ASCII 码 转换成各种各样的文件

丰富传输的问题



### P2P

不存在永远在线的服务器

每个主机既可以提供服务，也可以请求服务。

节点之间可以直接通讯。

可扩展性好

网络健壮性强



### C\S

客户端服务端

服务器永久的提供服务

客户间接性的访问

客户之间不能直接进行通信

客户可能会使用动态 IP





端口、工作原理

| 服务   | 端口 |
| ------ | ---- |
| FTP    | 21   |
| Telnet | 23   |
| SSH    | 22   |
| SMTP   | 25   |
| DNS    | 53   |
| HTTP   | 80   |
|        |      |

题目

10

22

30





## 第五章 传输层

### 5.1 运输层概述

主机才会有的层次

使用网络层的服务，为应用层提供服务。

提供进程-进程之间的逻辑通信

复用、分用

差错检测



#### 端口号

16bit `65536` 个

- 服务端使用
  - 0-1023
  - 1024-49151
- 客户端使用



### 5.2 运输层协议的要素

### 5.3 实现可靠数据传输的网络协议设计

### 5.4 拥塞控制

### 5.5 因特网中的运输层协议

### 5.6 用户数据协议 UDP

1. 无连接的

2. 努力交付，不保证可靠

3. 面向报文，适合一次性传输少量的。

   > 会发送应用层发过来的完整报文

4. 无拥塞控制，适合实时应用。

5. 首部 8B



首部格式：

> 2B 源端口 + 2B 目的端口
>
> 2B UDP 长度 + 2B UDP 校验和



伪首部只会在计算检验和时出现。

#### UDP 校验过程



### 5.7 传输控制协议 TCP

不提供广播、多播

1. 面向连接
2. 只能是点对点的
3. 可靠有序、不丢不重
4. 全双工通信 ： 发送、接受缓存
5. 面向字节流



#### TCP 报文段首部格式

20B 固定大小 

> 源端口+目的端口
>
> 序号：数据中第一个字节流
>
> 确认号：期待下一个该收到的字节序号
>
> 数据偏移+保留+(URG紧急+ACK确认+PSH急交付+RST重新连接+SYN同步+FIN终止) + 窗口:允许对方可以发送的数据量
>
> 检验和:要加上伪首部计算 + 紧急指针





#### TCP 连接管理



1. 客户端发送 **连接请求报文段** 无应用层数据 `SYN=1, seq=x 随机`
2. 分配缓存和变量，返回**确认报文段** 无应用层数据 `SYN=1, ACK=1, seq=y 随机, ack = x+1`
3. 客户端分配缓存和变量，向服务端返回确认的确认 `SYN=0, ACK=1, seq=x+1, ack=y+1`



#### TCP 连接释放

任何一方都可以终止连接

1. 发送释放报文段，关闭连接 `FIN=1, seq=u`
2. 服务端回送一个确认报文段 `ACK=1, seq=v, ack=u+1`
3. 服务器端发完数据，主动关闭 `FIN=1, ACK=1, seq=w, ack=u+1`
4. 客户端回复一个确认报文段，等 **2MSL 最长报文段寿命** 后，彻底关闭 `ACK=1, seq=u+1, ack=w+1`



#### TCP 可靠传输的机制

1. 校验
2. 确认
3. 重传



重传时间：RTTs 加权平均往返时间

快速重传：冗余 ACK





#### TCP 流量控制

滑动窗口机制

> 接收方根据自己的缓存大小，动态的调整发送方的窗口大小。即 接受窗口 rwnd
>
> 发送方的发送窗口取 `min(接受窗口rwnd, 拥塞窗口cwnd)`

收到零窗口通知，则会启动一个计时器。每当计时器时间到，都会发送一个零窗口的探测报文段，接收方收到后返回当前的窗口值。



#### TCP 拥塞控制

出现拥塞的条件：

> 对资源需求的总和 > 可用资源



##### 慢开始 拥塞避免

开始的时候比较少，快速增长到 `ssthresh` 时

“加法增大” 直到拥塞 设置新的 `ssthresh` 

“乘法减小” 开始新的一轮



##### 快重传 快回复

类似的，“乘法减小” 后 线性增长





重点：

- 5.3
- 5.4
- 5.6
- 5.7 拥塞控制 重传机制

题目：

20

22

27

28

29

会画图



## 第六章 网络层

### 6.1 网络层涉及的问题

### 6.2 路由选择

### 6.3 静态路由选择

### 6.4 动态路由选择 :small_red_triangle:



### 6.6 因特网上的网络层协议

### 6.7 因特网控制报文协议 ICMP

应用例子 基本概念

### 6.9 因特网的路由选择协议

#### RIP

#### OSPF

#### BGP4

### 6.10 网络互联

习题：

35

36

37

38

41

42

43

44

45



## 第七章 数据链路层和局域网

### 7.1 数据链路层基础知识

- 帧 ：链路层协议的数据单元



1. 为网络层提供服务
2. 链路管理
3. 组帧
4. 流量控制
5. 差错控制

### 7.2 链路层协议 PPP

### 7.3 局域网计算机网络

### 7.4 信道访问协议

### 7.5 MAC 与 ARP

### 7.6 以太网原理与技术

### 7.8 交换式局域网

### 7.9 虚拟局域网 VLAN

简单看一下 7.10.4 7.10.7  7.10.8



题目：

4

20

21

45 了解协议 分别用在哪里

46 



## 第八章 物理层

简单了解

